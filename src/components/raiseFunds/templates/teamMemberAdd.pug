include ../../../templates/mixins.pug
include ../../../templates/fields_mixins.pug
include menu.pug

+breadcrumbs('Create Campaign', '', 
    [
        ['Home', '/'],
        ['Create campaign', '/campaign/' + values.id + '/general_information'],
        ['team member (Advisor)', ''],
    ]
)

section.team-members.container.m-b-85
  - var campaignId = values.id;
  - var formcId = formc.id;
  +menu('campaign', 'team-members')

  // SPECIAL HACK FOR CROPPER
  - this.model = this.member;
  - this.model.id = formc.campaign_id;

  //START RIGHT BLOCK
  .col-xl-8.col-lg-8.col-md-12
    h2.text-uppercase.text-lg-center.text-xs-center.dosis.m-t-0 #{type == 'advisor' ? 'advisor' : 'team member'}

    form.form-section.col-xl-12
      +fieldTextLabel("first_name", _.extend({
        class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right ',
        class2: 'col-xl-9 col-lg-12',
        label: 'First name',
        value: member.first_name
      }, fields.first_name))
      +fieldTextLabel("last_name", _.extend({
        class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right ',
        class2: 'col-xl-9 col-lg-12',
        label: 'Last name',
        value: member.last_name
      }, fields.last_name))
      +fieldTextLabel("email", _.extend({
        class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right ',
        class2: 'col-xl-9 col-lg-12',
        label: 'Email',
        value: member.email
      }, fields.email))
      if type == 'advisor'
        +fieldTextLabel("title", _.extend({
          class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right ',
          class2: 'col-xl-9 col-lg-12',
          label: 'Title',
          readonly: true,
          value: 'Advisor',
        }, fields.title))
      else
        +fieldTextLabel("title", _.extend({
          class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right ',
          class2: 'col-xl-9 col-lg-12',
          label: 'Title',
          value: member.title
        }, fields.title))

      +fieldTextareaLabel("bio", _.extend({
          class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right ',
          class2: 'col-xl-9 col-lg-12 big-textarea',
          placeholder: "At least 150 characters",
          label: 'Bio',
          value: member.bio,
        }, fields.bio))

      .row.showPopover(data-content="Why do we ask? These affinity based questions can help us share your campaign with potential investors with similar backgrounds.")
        input(type="hidden" name="city" values=member.city)
        input(type="hidden" name="state" value=member.state)
        .col-xl-6.col-lg-6.input-min-width
          +fieldTextLabel('zip_code', _.extend({
            'class1': 'col-xl-6 col-lg-12 text-xl-right text-lg-left p-t-0 m-b-0 m-b-lg-1',
            'class2': 'col-xl-6 col-lg-12',
            'label': 'Where did you grow up?',
            'type': 'text',
            'value': member.zip_code,
            'placeholder': 'Zip code',
          }, fields.zip_code))

        .col-xl-5.col-lg-6.col-sm-12.city_states.required.form-group
          .row
            label.col-xl-6.col-lg-12.col-xs-6.text-xl-right.text-lg-left City/State
            .col-xl-6.col-lg-12
              a(data-toggle="modal" data-target="#city_state_modal" href="#city_state_modal").change_state_city
                span.input-value.js-city-state #{ member['city'] ? member['city'] : '(City)' }, #{ member['state'] ? member['state'] : '(State)' }
                  i.fa.fa-pencil-square-o.link-1
      +fieldTextLabel("college", _.extend({
        class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right',
        class2: 'col-xl-9 col-lg-12',
        label:  'Collage',
        placeholder: 'Name of college or university',
      }, fields.collage))
      .row
        .col-lg-6.input-min-width
          +fieldTextLabel("linkedin", _.extend({
            class1: 'col-xl-6 col-lg-12 text-lg-left text-xl-right p-l-3 p-t-0 m-b-0 p-l-lg-1 m-b-lg-1',
            class2: 'col-xl-6 col-lg-12',
            label:  'Your LinkedIn link',
            placeholder: 'Your LinkedIn profile',
            }, fields.linkedin))
        .col-lg-6
          +fieldTextLabel("facebook", _.extend({
            class1: 'col-xl-5 col-lg-12 text-lg-left text-xl-right p-t-0 m-b-0 m-b-lg-1',
            class2: 'col-xl-7 col-lg-12',
            label:  'Your Facebook link',
            placeholder: 'Your Facebook profile',
            }, fields.facebook))

      +teamMemberDropzone("photo_image_id", _.extend({
          class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right ',
          class2: 'col-xl-9 col-lg-12',
          thumbSize: '255x135',
          default: '/img/default/255x153.png',
          icon: 'camera',
          label: 'Profile Picture',
          help_text: 'This image entices investors to view your campaign. A minimum size of 1600x400 is recommended.',
          text: 'Drop your photo here or click to upload',
          data: member.photo_data[0],
        }, fields.photo_image_id))
      //.row.dropzone__photo.media-item
        .col-lg-3.p-r-12.col-md-12.text-md-center.text-sm-center.text-xs-center
          .pull-lg-right.font-weight-bold  Photo
        div(style="position:relative;").clearfix
          div(style="line-height:115px;text-align:center;position:absolute;width:100%;height:100%;left:0;right:0;top:0;bottom:0;z-index:1;display:none;background-color:rgba(255,255,255,0.8);").uploading
            img(alt="activity indicator" src="/img/ajax-loader.gif" style="position:absolute;margin:auto;top:0;left:0;right:0;bottom:0;")
          span
            .col-lg-9.text-lg-center
              .border-dropzone.col-lg-12.gallery
                .col-lg-6.col-md-5.col-sm-5.col-xs-5.p-dropzone.text-md-center.text-sm-center.text-xs-center.p-dropzone
                  div(href="#")
                    p.drop-photo Drop your photo here or click to upload
                    i.fa.fa-camera
                .col-lg-6.col-md-7.col-sm-7.col-xs-7.text-lg-center.p-dropzone
                  img(src=member.photo).img-fluid.img-circle.img-photo
      .col-lg-12.text-lg-right.p-r-0.p-t-2.text-md-center.text-sm-center.text-xs-center
        button.btn.btn-secondary.text-uppercase.m-r-3.cancel cancel
        button(data-method=index == 'new' ? 'POST' : 'PUT').btn.btn-primary.text-uppercase.pull-lg-right.save Save
          //
            .col-lg-6.p-r-0
              .dropdown.pull-right
                button(type="submit"
                id="dropdownMenuButton"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                ).btn.btn-lg.btn-primary.text-uppercase.dropdown-toggle Save and add other
                .dropdown-menu(aria-labelledby="dropdownMenuButton")
                  a(href="").dropdown-item Add Advisor
                  a(href="").dropdown-item Add Team Member
//MODAL
div(tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true")#city_state_modal.modal.fade
  div(role="document").modal-dialog
    .modal-content
      .modal-header
        button(type="button" data-dismiss="modal" aria-label="Close").close
          span(aria-hidden="true")
            i.fa.fa-times
        h2.text-xs-center.text-uppercase.dosis.modal-title City/State

      .modal-body
        .container.form-section
          .col-lg-10.offset-lg-1.border-bottom
            .form-group.row.clearfix.required
              input(type="text" placeholder="City" value=values['city'])#city.js-city.form-control
            .form-group.row.clearfix.required
              select(name='state')#state.js-state.form-control.custom-select
                option(checked='checked', value="") State
                each state in states
                  if state.abbreviation == values.state
                    option(value=state.abbreviation selected)= state.name
                  else
                    option(value=state.abbreviation)= state.name
            .form-group.row.clearfix.required.m-b-2
              .row
                .col-lg-12
                  .col-lg-12.text-xs-center
                    button(data-dismiss="modal").btn.btn-primary.text-uppercase save
        .modal-footer


if !window.google || !window.google.maps
  script(src= window.location.protocol + "//maps.google.com/maps/api/js?language=en&key=" + googleMapKey)
