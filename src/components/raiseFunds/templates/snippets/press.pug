mixin row(value, index)
  - var index = index;
  .col-xl-12(data-index=index class=name + ' addSectionBlock').p-sm-0
    .delete-section-container
      a(href="#" data-section=name data-index=index).delete-sectionnew
        i.fa.fa-times

    | !{app.fields.nestedTextLabel(name, 'headline', value, index, {placeholder:'Please enter a quote or the headline'}, attr.schema.headline)}
    | !{app.fields.nestedTextLabel(name, 'name', value, index, {placeholder:'Example: Business Insider', class1: 'col-xl-3 col-lg-12 text-lg-left text-xl-right p-t-0',}, attr.schema.name)}
    | !{app.fields.nestedTextLabel(name, 'link', value, index, {placeholder:'http://www.'}, attr.schema.link)}

mixin run()

  if first_run
    .row
      .col-lg-12.text-lg-center.text-md-center.text-xs-center
        h3.d-inline-block.m-t-0.mb25 Articles and Press
    div(class=(attr.row == 0 ? '' : 'row ') + name + '_block' + (attr.required == true ? ' required ' : ' ') + ' nested')
      div(class=(attr.row == 0 ? '' : '') + name + '_container' + (attr.required == true ? ' required ' : ' ') + ' nested')
        if values == null || values.length == 0
          +row({}, 0)
        else
          each value, index in values
            +row(value, index)
    .row.add-link
      .col-xl-9.offset-xl-3.p-sm-0
        a(href="#" data-section=name data-comp="raiseFunds" data-template="press").link-2.add-sectionnew
          i.fa.fa-plus
          |  Add Another Article
  else
    +row({}, index)

+run()