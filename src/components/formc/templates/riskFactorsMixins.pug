mixin showRisk(name, index, title, risk)
  form(data-method="PATCH" data-index=(index) index=index)
    input(type="hidden" name="title" value=title)
    textarea(name="risk" readonly index=index).form-control.big-textarea #{ values[name].hasOwnProperty(index) ? values[name][index].risk : risk }
    .text-md-center.text-lg-right
      button(style="display: " + (values[name].hasOwnProperty(index) ? 'inline-block' : 'none') + ';' data-index=index).btn.btn-sm.m-t-1.edit-risk.buttons.added-state  Edit risk
      button(style="display: " + (values[name].hasOwnProperty(index) ? 'inline-block' : 'none') + ';' data-index=index).btn.btn-sm.m-t-1.delete.buttons.added-state  Delete risk
      button(type="submit" style="display: none").btn.btn-sm.m-t-1.add-risk.buttons.editing-state Save and Add this Risk
      button(style="display:" + (values[name].hasOwnProperty(index) ? 'none' : 'inline-block') + ";" data-index=index).btn.btn-sm.m-t-1.edit-risk.buttons.unadded-state Edit Risk

mixin showRiskForm(v, k, field)
  .panel.panel-default.risk-panel(index=k)
    .panel-heading(role="tab" id=("heading-" + k))
      a(data-toggle="collapsing"
      data-parent="#accordion-risk" 
      href="#collapse-" + k
      aria-expanded="false"
      aria-controls="collapse-" + k
      class=("list-group-item-action active" + (values[field].hasOwnProperty(k) ? ' added-risk-title' : ''))
      )= v.title
        i.fa.fa-angle-up
    .panel-collapse.collapse.in(role="tabpanel"
    id="collapse-" + k
    aria-labelledby=("heading-" + k)
    )
      +showRisk(field, k, v.title, v.risk)